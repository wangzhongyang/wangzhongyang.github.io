<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>身份证号码验证</title>
    <url>/undefined.html</url>
    <content><![CDATA[<h4 id="id-number-verification-go"><a href="#id-number-verification-go" class="headerlink" title="id_number_verification.go"></a>id_number_verification.go</h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"fmt"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"regexp"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"sort"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"strconv"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"time"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">)</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// 省份校验</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vcity = []<span class="keyword">int</span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">11</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">12</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">13</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">14</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">15</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">21</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">22</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">23</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">31</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">32</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">33</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">34</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">35</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">36</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">37</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">41</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">42</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">43</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">44</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">45</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">46</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">50</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">51</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">52</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">53</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">54</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">61</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">62</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">63</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">64</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">65</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">71</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">81</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">82</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="number">91</span>,</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// isCardNo 检查号码是否符合规范，包括长度，类型</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isCardNo</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	matched, err := regexp.MatchString(<span class="string">`(^\d&#123;15&#125;$)|(^\d&#123;17&#125;(\d|X)$)`</span>, card)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> matched == <span class="literal">false</span> || err != <span class="literal">nil</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// checkProvince 取身份证前两位,校验省份</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkProvince</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	province, err := strconv.Atoi(card[:<span class="number">2</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">// 省份校验</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	n := sort.SearchInts(vcity, province)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> n &gt;= <span class="number">0</span> &amp;&amp; n &lt; <span class="built_in">len</span>(vcity) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// verifyBirthday 校验日期</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">verifyBirthday</span><span class="params">(year, month, day <span class="keyword">int</span>, birthday time.Time)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	now := time.Now()</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> birthday.Year() == year &amp;&amp; birthday.Month() == time.Month(month) &amp;&amp; birthday.Day() == day &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="comment">//判断年份的范围（3岁到100岁之间)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">		age := now.Year() - birthday.Year()</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">if</span> age &gt;= <span class="number">3</span> &amp;&amp; age &lt;= <span class="number">100</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">		&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// checkBirthday 检查生日是否正确</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkBirthday</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	l := <span class="built_in">len</span>(card)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//身份证15位时，次序为省（3位）市（3位）年（2位）月（2位）日（2位）校验位（3位），皆为数字</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> l == <span class="number">15</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		year, _ := strconv.Atoi(card[<span class="number">6</span>:<span class="number">8</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		year = <span class="number">1900</span> + year</span></pre></td></tr><tr><td class="code"><pre><span class="line">		month, _ := strconv.Atoi(card[<span class="number">8</span>:<span class="number">10</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		day, _ := strconv.Atoi(card[<span class="number">10</span>:<span class="number">12</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		birthday := time.Date(year, time.Month(month), day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, time.UTC)</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> verifyBirthday(year, month, day, birthday)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//身份证18位时，次序为省（3位）市（3位）年（4位）月（2位）日（2位）校验位（4位），校验位末尾可能为X</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> l == <span class="number">18</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		year, _ := strconv.Atoi(card[<span class="number">6</span>:<span class="number">10</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		month, _ := strconv.Atoi(card[<span class="number">10</span>:<span class="number">12</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		day, _ := strconv.Atoi(card[<span class="number">12</span>:<span class="number">14</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		birthday := time.Date(year, time.Month(month), day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, time.UTC)</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> verifyBirthday(year, month, day, birthday)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">// changeFifteenToEighteen 15位转18位身份证号</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeFifteenToEighteen</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(card) == <span class="number">15</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		arrInt := []<span class="keyword">int</span>&#123;<span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		arrCh := []<span class="keyword">string</span>&#123;<span class="string">"1"</span>, <span class="string">"0"</span>, <span class="string">"X"</span>, <span class="string">"9"</span>, <span class="string">"8"</span>, <span class="string">"7"</span>, <span class="string">"6"</span>, <span class="string">"5"</span>, <span class="string">"4"</span>, <span class="string">"3"</span>, <span class="string">"2"</span>&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		cardTemp := <span class="number">0</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">		card = fmt.Sprintf(<span class="string">"%s%s%s"</span>, card[<span class="number">0</span>:<span class="number">6</span>], <span class="string">"19"</span>, card[<span class="number">6</span>:])</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">17</span>; i++ &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">			temp, _ := strconv.Atoi(card[i : i+<span class="number">1</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">			cardTemp += temp * arrInt[i]</span></pre></td></tr><tr><td class="code"><pre><span class="line">		&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		card += arrCh[cardTemp%<span class="number">11</span>]</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> card</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> card</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//校验位的检测</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkParity</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//15位转18位</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	card = changeFifteenToEighteen(card)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	l := <span class="built_in">len</span>(card)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> l == <span class="number">18</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		arrInt := []<span class="keyword">int</span>&#123;<span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		arrCh := []<span class="keyword">string</span>&#123;<span class="string">"1"</span>, <span class="string">"0"</span>, <span class="string">"X"</span>, <span class="string">"9"</span>, <span class="string">"8"</span>, <span class="string">"7"</span>, <span class="string">"6"</span>, <span class="string">"5"</span>, <span class="string">"4"</span>, <span class="string">"3"</span>, <span class="string">"2"</span>&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		cardTemp := <span class="number">0</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">17</span>; i++ &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">			temp, _ := strconv.Atoi(card[i : i+<span class="number">1</span>])</span></pre></td></tr><tr><td class="code"><pre><span class="line">			cardTemp += temp * arrInt[i]</span></pre></td></tr><tr><td class="code"><pre><span class="line">		&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">if</span> arrCh[cardTemp%<span class="number">11</span>] == card[<span class="number">17</span>:<span class="number">18</span>] &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">		&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Verification</span><span class="params">(card <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//校验长度，类型</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> !isCardNo(card) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//检查省份</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> !checkProvince(card) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//校验生日</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> !checkBirthday(card) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//检验位的检测</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">if</span> !checkParity(card) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="id-number-verification-test-go"><a href="#id-number-verification-test-go" class="headerlink" title="id_number_verification_test.go"></a>id_number_verification_test.go</h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"fmt"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="string">"testing"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">)</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_verification</span><span class="params">(t *testing.T)</span></span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">// 以下输出应全为true</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="comment">//card := "360721199906013354"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	card := <span class="string">"360721990601335"</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	fmt.Println(isCardNo(card))</span></pre></td></tr><tr><td class="code"><pre><span class="line">	fmt.Println(checkProvince(card))</span></pre></td></tr><tr><td class="code"><pre><span class="line">	fmt.Println(checkBirthday(card))</span></pre></td></tr><tr><td class="code"><pre><span class="line">	fmt.Println(changeFifteenToEighteen(card) == <span class="string">"360721199906013354"</span>)</span></pre></td></tr><tr><td class="code"><pre><span class="line">	fmt.Println(Verification(card))</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL添加bin-log</title>
    <url>/1529598446.html</url>
    <content><![CDATA[<h4 id="查看是否开启"><a href="#查看是否开启" class="headerlink" title="查看是否开启"></a>查看是否开启</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">VARIABLES</span> <span class="keyword">like</span> <span class="string">'%log_bin%'</span></span></pre></td></tr></table></figure>
<p><img src="../images/mysql_bin_log_off.png" alt="未开启bin log"></p>
<h4 id="在MySQL配置文件开启binlog日志的两种方式"><a href="#在MySQL配置文件开启binlog日志的两种方式" class="headerlink" title="在MySQL配置文件开启binlog日志的两种方式"></a>在MySQL配置文件开启binlog日志的两种方式</h4><ul>
<li>第一种<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 开启binlog</span></pre></td></tr><tr><td class="code"><pre><span class="line">log_bin&#x3D;ON</span></pre></td></tr><tr><td class="code"><pre><span class="line"># binlog日志的基本文件名</span></pre></td></tr><tr><td class="code"><pre><span class="line">log_bin_basename&#x3D;&#x2F;etc&#x2F;mysql&#x2F;log_bin_data&#x2F;log_bin</span></pre></td></tr><tr><td class="code"><pre><span class="line"># binlog文件的索引文件，管理所有binlog文件</span></pre></td></tr><tr><td class="code"><pre><span class="line">log_bin_index&#x3D;&#x2F;etc&#x2F;mysql&#x2F;log_bin_data&#x2F;log_bin.index</span></pre></td></tr></table></figure></li>
<li>第二种<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 开启binlog 这一行在5.7版本不加没有效果</span></pre></td></tr><tr><td class="code"><pre><span class="line">log_bin&#x3D;ON</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">log-bin&#x3D;&#x2F;etc&#x2F;mysql&#x2F;log_bin_data&#x2F;log_bin</span></pre></td></tr></table></figure>
<em>binlog 文件路径为 /etc/mysql/log_bin_data/</em></li>
</ul>
<h4 id="查看结果"><a href="#查看结果" class="headerlink" title="查看结果"></a>查看结果</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">VARIABLES</span> <span class="keyword">like</span> <span class="string">'%log_bin%'</span></span></pre></td></tr></table></figure>
<p><img src="../images/mysql_bin_log_on.png" alt="已开启bin log"></p>
<p>查看bin log 文件地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls /etc/mysql/log_bin_data/log_bin</span></pre></td></tr></table></figure>
<p><img src="../images/mysql_bin_log_file.png" alt="bin log file"></p>
<h4 id="解码查看binlog文件"><a href="#解码查看binlog文件" class="headerlink" title="解码查看binlog文件"></a>解码查看binlog文件</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysqlbinlog log_bin.000002 --base64-output&#x3D;decode-rows -v</span></pre></td></tr></table></figure>


]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/4a17b156.html</url>
    <content><![CDATA[<a id="more"></a>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post ahha this test url"</span></span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Ubuntu 安装ZSH</title>
    <url>/2231054001.html</url>
    <content><![CDATA[<a id="more"></a>

<h4 id="安装zsh"><a href="#安装zsh" class="headerlink" title="安装zsh"></a>安装zsh</h4><ul>
<li>install<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install zsh</span></pre></td></tr></table></figure></li>
<li>验证安装<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zsh --version</span></pre></td></tr></table></figure></li>
<li>设置默认shell<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;zsh</span></pre></td></tr></table></figure></li>
<li>查看默认shell<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo $SHELL</span></pre></td></tr></table></figure>
输出<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;zsh</span></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="安装和配置oh-my-zsh-框架"><a href="#安装和配置oh-my-zsh-框架" class="headerlink" title="安装和配置oh-my-zsh 框架"></a>安装和配置oh-my-zsh 框架</h4><ul>
<li>安装所需工具<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install wget git</span></pre></td></tr></table></figure></li>
<li>下载并执行安装脚本<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;raw&#x2F;master&#x2F;tools&#x2F;install.sh -O - | zsh</span></pre></td></tr></table></figure></li>
<li>copy配置文件<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp ~&#x2F;.oh-my-zsh&#x2F;templates&#x2F;zshrc.zsh-template ~&#x2F;.zshrc</span></pre></td></tr><tr><td class="code"><pre><span class="line">source ~&#x2F;.zshrc</span></pre></td></tr></table></figure></li>
<li>完成的结果<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➜  ~</span></pre></td></tr></table></figure>


</li>
</ul>
<p><a href="https://ohmyz.sh/" target="_blank" rel="noopener">zsh官网</a></p>
]]></content>
      <categories>
        <category>操作系统</category>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
</search>
